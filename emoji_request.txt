### –ü–ª–∞–Ω –¥–ª—è –≠–º–æ—Ü–∏–π:
1.  **UI**: –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–°–º–∞–π–ª–∏–∫" –≤ –æ–∫–Ω–æ –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –≤—Å–ø–ª—ã–≤–∞–µ—Ç –º–µ–Ω—é —Å 4-6 —ç–º–æ–¥–∑–∏ (üëç, üòÇ, üò≠, ü§î, GG).
2.  **–°–µ—Ç—å**: –ü—Ä–∏ –≤—ã–±–æ—Ä–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º JSON: `{"type": "emote", "emoji": "üëç"}`.
3.  **–ê–Ω–∏–º–∞—Ü–∏—è**: –ö–æ–≥–¥–∞ –ø—Ä–∏—Ö–æ–¥–∏—Ç —ç–º–æ–¥–∑–∏, –æ–Ω–æ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –ø–æ —Ü–µ–Ω—Ç—Ä—É –¥–æ—Å–∫–∏, –ø–ª–∞–≤–Ω–æ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –≤–≤–µ—Ä—Ö –∏ –∏—Å—á–µ–∑–∞–µ—Ç (Fade Out).

---

### –®–∞–≥ 1: –í–∏–¥–∂–µ—Ç –≤—Å–ø–ª—ã–≤–∞—é—â–µ–≥–æ –≠–º–æ–¥–∑–∏ (`core/emote_widget.py`)

–°–æ–∑–¥–∞–π —ç—Ç–æ—Ç —Ñ–∞–π–ª. –≠—Ç–æ –±—É–¥–µ—Ç –ª–µ—Ç–∞—é—â–∏–π `QLabel` —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π.

```python
from PyQt6.QtWidgets import QLabel, QGraphicsOpacityEffect
from PyQt6.QtCore import Qt, QPropertyAnimation, QEasingCurve, QPoint, QParallelAnimationGroup

class FloatingEmote(QLabel):
    def __init__(self, parent, text, start_pos):
        super().__init__(parent)
        self.setText(text)
        self.setFont(parent.font()) # –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å–≤–æ–π —à—Ä–∏—Ñ—Ç –ø–æ–±–æ–ª—å—à–µ
        # –°—Ç–∏–ª—å —ç–º–æ–¥–∑–∏ (–±–æ–ª—å—à–æ–π, —Å —Ç–µ–Ω—å—é)
        self.setStyleSheet("font-size: 64px; color: white; background: transparent;")
        self.adjustSize()

        # –¶–µ–Ω—Ç—Ä–∏—Ä—É–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ start_pos
        self.move(start_pos.x() - self.width() // 2, start_pos.y() - self.height() // 2)
        self.show()

        # –≠—Ñ—Ñ–µ–∫—Ç –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç–∏
        self.opacity = QGraphicsOpacityEffect(self)
        self.setGraphicsEffect(self.opacity)

        # –ê–Ω–∏–º–∞—Ü–∏—è –î–≤–∏–∂–µ–Ω–∏—è (–≤–≤–µ—Ä—Ö)
        self.anim_pos = QPropertyAnimation(self, b"pos")
        self.anim_pos.setDuration(1500)
        self.anim_pos.setStartValue(self.pos())
        self.anim_pos.setEndValue(QPoint(self.pos().x(), self.pos().y() - 100))
        self.anim_pos.setEasingCurve(QEasingCurve.Type.OutQuad)

        # –ê–Ω–∏–º–∞—Ü–∏—è –ò—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
        self.anim_fade = QPropertyAnimation(self.opacity, b"opacity")
        self.anim_fade.setDuration(1500)
        self.anim_fade.setStartValue(1.0)
        self.anim_fade.setEndValue(0.0)
        self.anim_fade.setEasingCurve(QEasingCurve.Type.InQuad)

        # –ì—Ä—É–ø–ø–∞ (–∑–∞–ø—É—Å–∫–∞–µ–º –≤–º–µ—Å—Ç–µ)
        self.group = QParallelAnimationGroup()
        self.group.addAnimation(self.anim_pos)
        self.group.addAnimation(self.anim_fade)
        self.group.finished.connect(self.deleteLater)
        self.group.start()
```

---

### –®–∞–≥ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ò–≥—Ä—ã (–Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –®–∞—Ö–º–∞—Ç/–®–∞—à–µ–∫)

–¢–µ–±–µ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É —á–∞—Ç–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π.
–Ø –ø–æ–∫–∞–∂—É –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ `ChessGame`, –≤ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –∏–≥—Ä–∞—Ö (`Checkers`, `TicTac`, `Battleship`) –¥–µ–ª–∞–µ—Ç—Å—è **–∞–±—Å–æ–ª—é—Ç–Ω–æ —Ç–∞–∫ –∂–µ**.

**–ê. –ò–º–ø–æ—Ä—Ç—ã –≤ `ui.py`:**

```python
from PyQt6.QtWidgets import QMenu # <--- –î–æ–±–∞–≤–∏—Ç—å QMenu
from PyQt6.QtGui import QAction   # <--- –î–æ–±–∞–≤–∏—Ç—å QAction
from core.emote_widget import FloatingEmote # <--- –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—à –≤–∏–¥–∂–µ—Ç
# ...
```

**–ë. –ö–Ω–æ–ø–∫–∞ –≤ `__init__`:**

–î–æ–±–∞–≤—å –∫–Ω–æ–ø–∫—É —Ä—è–¥–æ–º —Å `status_label` –∏–ª–∏ –≤–Ω–∏–∑—É.

```python
    def __init__(self, ...):
        # ...

        # –ö–Ω–æ–ø–∫–∞ –≠–º–æ—Ü–∏–π (–°–ø—Ä–∞–≤–∞ —Å–≤–µ—Ä—Ö—É –∏–ª–∏ –≤ layout)
        # –õ—É—á—à–µ –¥–æ–±–∞–≤–∏—Ç—å HBox –¥–ª—è –∑–∞–≥–æ–ª–æ–≤–∫–∞, —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –±—ã–ª–∞ —Å–±–æ–∫—É

        # (–ï—Å–ª–∏ —É —Ç–µ–±—è —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—Å—Ç–æ –¥–æ–±–∞–≤–ª–µ–Ω –≤ main_layout, –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫):
        header_layout = QHBoxLayout()
        header_layout.addWidget(self.status_label)

        self.btn_emote = QPushButton("üòÄ")
        self.btn_emote.setFixedSize(40, 40)
        self.btn_emote.setStyleSheet("background: rgba(255,255,255,30); border-radius: 20px; font-size: 20px;")
        self.btn_emote.clicked.connect(self.show_emote_menu)
        header_layout.addWidget(self.btn_emote)

        # –í—Å—Ç–∞–≤–ª—è–µ–º header_layout –≤–º–µ—Å—Ç–æ status_label (–µ—Å–ª–∏ –æ–Ω –±—ã–ª addWidget)
        # self.main_layout.addWidget(self.status_label) <--- –ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê:
        self.main_layout.addLayout(header_layout)

        # ...
```

**–í. –ú–µ—Ç–æ–¥ –ø–æ–∫–∞–∑–∞ –º–µ–Ω—é:**

```python
    def show_emote_menu(self):
        menu = QMenu(self)
        # –°—Ç–∏–ª—å –º–µ–Ω—é
        menu.setStyleSheet("""
            QMenu { background-color: #2c3e50; color: white; border: 1px solid #555; }
            QMenu::item { padding: 5px 20px; font-size: 24px; }
            QMenu::item:selected { background-color: #34495e; }
        """)

        emojis = ["üëç", "üòÇ", "üò≠", "ü§î", "üò°", "GG"]
        for em in emojis:
            action = QAction(em, self)
            action.triggered.connect(lambda ch, e=em: self.send_emote(e))
            menu.addAction(action)

        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–¥ –∫–Ω–æ–ø–∫–æ–π
        menu.exec(self.btn_emote.mapToGlobal(QPoint(0, self.btn_emote.height())))

    def send_emote(self, emoji):
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É —Å–µ–±—è
        self.show_floating_emote(emoji, is_mine=True)

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º
        if self.is_online and self.network:
            self.network.send_json({"type": "game_emote", "emoji": emoji})
```

**–ì. –ú–µ—Ç–æ–¥ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è (`show_floating_emote`):**

```python
    def show_floating_emote(self, emoji, is_mine):
        # –¶–µ–Ω—Ç—Ä –æ–∫–Ω–∞
        center = self.rect().center()

        # –ï—Å–ª–∏ —ç—Ç–æ —è - —á—É—Ç—å –ø—Ä–∞–≤–µ–µ, –µ—Å–ª–∏ –≤—Ä–∞–≥ - —á—É—Ç—å –ª–µ–≤–µ–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        # –ù–æ –ø—Ä–æ—â–µ –ø—Ä–æ—Å—Ç–æ –ø–æ —Ü–µ–Ω—Ç—Ä—É –¥–æ—Å–∫–∏

        FloatingEmote(self, emoji, center)

        # –ó–≤—É–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        # SoundManager().play("notification")
```

**–î. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–µ—Ç–∏ (`on_network_message`):**

```python
    def on_network_message(self, data):
        # ... (—Å—Ç–∞—Ä—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏) ...

        # –ù–û–í–ê–Ø –ü–†–û–í–ï–†–ö–ê
        if isinstance(data, dict) and data.get("type") == "game_emote":
            emoji = data.get("emoji")
            self.show_floating_emote(emoji, is_mine=False)
```

---

### –®–∞–≥ 3: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `main.py` (–õ–∞—É–Ω—á–µ—Ä)

–õ–∞—É–Ω—á–µ—Ä –¥–æ–ª–∂–µ–Ω —É–º–µ—Ç—å –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è —Ç–∏–ø–∞ `game_emote` –≤ –∏–≥—Ä—É.

–í –º–µ—Ç–æ–¥–µ `on_server_data`:

```python
        elif dtype == "game_emote" and self.active_game:
            self.active_game.on_network_message(data)
            # –õ–æ–≥–∏—Ä—É–µ–º
            emoji = data.get("emoji")
            self.add_to_log(f"–°–æ–ø–µ—Ä–Ω–∏–∫: {emoji}")
```

–ò –≤ `on_client_data` (—Å–≤–æ–∏ —ç–º–æ—Ü–∏–∏):

```python
    def on_client_data(self, data):
        if data.get("type") == "game_emote":
            emoji = data.get("emoji")
            self.add_to_log(f"–í—ã: {emoji}")

        # ... (—Å—Ç–∞—Ä—ã–π –∫–æ–¥ game_move) ...
```

---

### –®–∞–≥ 4: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `server.py`

–°–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω –ø–µ—Ä–µ—Å—ã–ª–∞—Ç—å —ç—Ç–æ—Ç –Ω–æ–≤—ã–π —Ç–∏–ø —Å–æ–æ–±—â–µ–Ω–∏–π.
–î–æ–±–∞–≤—å `game_emote` –≤ —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ç–∏–ø–æ–≤ –¥–ª—è –ø–µ—Ä–µ—Å—ã–ª–∫–∏.

```python
                # 9. –ò–ì–†–ê (–•–æ–¥—ã)
                elif ctype in ["game_move", "game_emote"]: # <--- –î–û–ë–ê–í–ò–õ–ò –°–Æ–î–ê
                    lid = clients[writer]["current_lobby"]
                    if lid and lid in lobbies:
                        await pass_to_opponent(writer, lobbies[lid], data)
```

–¢–µ–ø–µ—Ä—å –∏–≥—Ä–æ–∫–∏ –º–æ–≥—É—Ç —Å–ø–∞–º–∏—Ç—å —Å–º–∞–π–ª–∏–∫–∞–º–∏, –∏ –æ–Ω–∏ –±—É–¥—É—Ç –∫—Ä–∞—Å–∏–≤–æ –≤—ã–ª–µ—Ç–∞—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω–µ –∏ –ø–∏—Å–∞—Ç—å—Å—è –≤ –ª–æ–≥.